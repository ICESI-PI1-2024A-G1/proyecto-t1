{% extends "base.html" %}

{% block title %}
Equipos
{% endblock %}

{% block content %}
{% load static %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
<link rel="stylesheet" href="{% static 'general/css/utils.css' %}">
<div class="container d-flex justify-content-center">
    <div class="d-flex justify-content-between card shadow">


        <div class="d-flex justify-content-between card-header py-3">
            <div>
                <h2 class="mb-4 title">Equipos</h2>
            </div>
            <div class="text-end">
                <a href="/teams/add-team-form" class="btn btn-primary btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fa fa-plus"></i>
                    </span>
                    <span class="text">Crear equipo</span>
                </a>
            </div>
        </div>


        <div class="container overflow-auto-container overflow-x-scroll card-body">
            <table id="teamsTable" class="table table-bordered dataTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Líder</th>
                        <th>Descripción</th>
                        <th>Fecha de Creación</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for team in teams %}
                    <tr>
                        <td>
                            {{ team.id }}
                        </td>
                        <td>
                            {{ team.name }}
                        </td>
                        <td>
                            {{ team.leader }}
                        </td>
                        <td>
                            {{ team.description }}
                        </td>
                        <td>
                            {{ team.created_at|date:"d-m-Y" }}
                        </td>
                        <td>
                            <div class="dropdown">
                                <button type="button" class="btn p-0 dropdown-toggle hide-arrow"
                                    data-bs-toggle="dropdown" aria-expanded="true">
                                    <i class="fa fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu"
                                    style="position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate3d(-39px, 142.5px, 0px);"
                                    data-popper-placement="bottom-end">
                                    <button
                                        onclick="showModal('Miembros del equipo {{team.name}}', '/teams/show-members/{{team.id}}')"
                                        class="dropdown-item btn text-primary dropdown-item"><i class="fa fa-address-book"></i>Ver miembros</button>
                                    <a class="dropdown-item my-2 btn-sm btn text-danger delete-team " data-team-id="{{ team.id }}"><i
                                            class="fa fa-trash"></i>Eliminar Equipo</a>
                                    <a href="/teams/edit-team/{{team.id}}/" class="dropdown-item my-2 btn-sm btn text-secondary"><i
                                            class="fa fa-edit"></i>Editar</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    {% load static %}
    <script src="{% static '/teams/js/teams.js' %}"></script>

    {% endblock %}