{% extends "base.html" %}
{% block title %}Solicitudes{% endblock %}
{% block content %}

<div class="container">
    <h2>Solicitudes</h2>
    <div class="container">
        <div class="input-group mb-3">
            <!-- <span class="input-group-text" id="inputGroup-sizing-default">Buscar</span> -->
            <input type="text" id="searchBar" class="form-control" aria-label="Sizing example input"
                aria-describedby="inputGroup-sizing-default" placeholder="Buscar">
            <button id="performSearchButton" type="button" class="btn btn-primary"><i class="fa fa-search"></i></button>
        </div>
    </div>
    <div class="container overflow-auto-container">
        <table id="requestsTable" class="table table-bordered">
            <thead>
                <tr>
                    <th>Fecha Inicial</th>
                    <th>Fecha Final</th>
                    <th>Solicitante</th>
                    <th>Motivo</th>
                    <th>Gestor</th>
                    <th>Equipo</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for request in requests %}
                <tr id="request_{{ request.id }}">
                    <td>{{ request.initial_date }}</td>
                    <td>{{ request.final_date }}</td>
                    <td>{{ request.fullname }}</td>
                    <td>{{ request.reason }}</td>
                    <td>{{ request.manager }}</td>
                    <td>{{ request.team }}</td>
                    <td>
                        <p id="status_{{ request.id }}">{{ request.status }}</p>
                    </td>
                    <td>
                        <button onclick="showModal('Cambiar estado', '/requests/change-status/{{request.id}}')" class="btn text-success" data-request-id="{{ request.id }}">
                            Cambiar estado
                            <i class="fa fa-edit"></i>
                        </button>
                        <button onclick="showModal('Detalles de la solicitud', '/requests/{{request.id}}')"
                            class="btn details-btn text-primary" data-request-id="{{ request.id }}">
                            Ver detalles
                            <i class="fa fa-info"></i>
                        </button>
                        <button onclick="showModal('Asignar solicitud', '/requests/assign-request/{{request.id}}')"
                            class="btn details-btn " data-request-id="{{ request.id }}">
                            Asignar Solicitud
                            <i class="fa fa-user-plus"></i>
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% load static %}
<script src="{% static 'requests/js/requests.js' %}"></script>
{% endblock %}